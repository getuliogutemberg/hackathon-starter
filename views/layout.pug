doctype html
html(lang='pt-br', data-theme=theme)
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title #{title} - SpeedRush
    
    style.
      /* Variáveis de tema */
      :root {
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --text-primary: #212529;
        --text-secondary: #6c757d;
        --border-color: #dee2e6;
        --card-bg: #ffffff;
        --navbar-bg: #0d6efd;
        --navbar-text: #ffffff;
      }

      [data-theme="dark"] {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --text-primary: #ffffff;
        --text-secondary: #b3b3b3;
        --border-color: #404040;
        --card-bg: #2d2d2d;
        --navbar-bg: #000000;
        --navbar-text: #ffffff;
      }

      /* Aplicação do tema */
      html, body {
        height: 100%;
        margin: 0;
      }

      body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
        transition: background-color 0.3s ease, color 0.3s ease;
        display: flex;
        flex-direction: column;
      }

      .container {
        flex: 1 0 auto;
      }

      footer {
        flex-shrink: 0;
      }

      .navbar {
        background-color: var(--navbar-bg) !important;
        color: var(--navbar-text);
      }

      .card {
        background-color: var(--card-bg);
        border-color: var(--border-color);
      }

    link(rel='stylesheet', href='/css/main.css')
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css')
    block head
    if user
      script.
        window.user = {
          _id: '#{user._id}',
          profile: !{JSON.stringify(user.profile)}
        };
        window._csrf = '#{_csrf}';

  body(data-theme=theme)
    include partials/header

    .container.pt-5.mt-4
      include partials/flash
      block content

    include partials/footer

    script(src='/js/lib/jquery.min.js')
    script(src='/js/lib/popper.min.js')
    script(src='/js/lib/bootstrap.min.js')
    script(src='/js/main.js')
    script(src='/socket.io/socket.io.js')
    
    block scripts